{"ast":null,"code":"var _jsxFileName = \"/Users/PingKee/Desktop/Full Stack pre-assessment/assignment/Assigment2/src/components/Product/Product.js\";\nimport React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { formatMoney } from \"../../pipes/priceFormatter\";\nimport { cumulativeOffSet } from \"../../utilities/cumulativeOffset\";\nimport './Product.scss';\nimport SlideDots from \"../SlideDots/SlideDots\";\nimport { addProductToCart } from \"../../actions\";\n\nconst Product = props => {\n  const {\n    title,\n    price,\n    images,\n    description,\n    id\n  } = props.product;\n  const imageRef = React.createRef();\n  const [img, setImg] = useState(images[0]);\n  const [aItem, setAItem] = useState(0);\n\n  const handleImageChange = e => {\n    let clientX;\n\n    if (e.type === 'touchmove') {\n      clientX = e.touches[0].clientX;\n    } else {\n      clientX = e.clientX;\n    }\n\n    const currentX = clientX - cumulativeOffSet(imageRef.current).left; // console.dir(imageRef.current);\n\n    const part = imageRef.current.clientWidth / images.length; // console.log(Math.ceil(currentX / part) - 1);\n\n    let imgIndex = Math.ceil(currentX / part) - 1;\n\n    if (imgIndex < 0) {\n      imgIndex = 0;\n    }\n\n    if (imgIndex >= images.length) {\n      imgIndex = images.length - 1;\n    }\n\n    setAItem(imgIndex);\n    setImg(images[imgIndex]);\n  };\n\n  const handleMouseOut = e => {\n    setImg(images[0]);\n    setAItem(0);\n  };\n\n  const changeImage = i => {\n    setImg(images[i]);\n    setAItem(i);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card h-100 product\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: `/products/${id}`,\n    className: \"product__link\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    onMouseMove: handleImageChange,\n    onMouseOut: handleMouseOut,\n    onTouchMove: handleImageChange,\n    onTouchEnd: handleMouseOut,\n    className: \"card-img-top product__img\",\n    src: img,\n    alt: title,\n    ref: imageRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 68\n    }\n  }), /*#__PURE__*/React.createElement(SlideDots, {\n    len: images.length,\n    activeItem: aItem,\n    changeItem: changeImage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-body product__text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"card-title product__title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: `/products/${id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 21\n    }\n  }, title)), /*#__PURE__*/React.createElement(\"h5\", {\n    className: \"product__price\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 17\n    }\n  }, \"$\", formatMoney(price)), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"card-text product__description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 17\n    }\n  }, description), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => {\n      props.dispatch(addProductToCart({ ...props.product\n      }));\n    },\n    className: \"btn btn-info product__add-to-cart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 17\n    }\n  }, \"Add to cart\")));\n};\n\nexport default connect()(Product);","map":{"version":3,"sources":["/Users/PingKee/Desktop/Full Stack pre-assessment/assignment/Assigment2/src/components/Product/Product.js"],"names":["React","useState","connect","Link","formatMoney","cumulativeOffSet","SlideDots","addProductToCart","Product","props","title","price","images","description","id","product","imageRef","createRef","img","setImg","aItem","setAItem","handleImageChange","e","clientX","type","touches","currentX","current","left","part","clientWidth","length","imgIndex","Math","ceil","handleMouseOut","changeImage","i","dispatch"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\nimport {connect} from 'react-redux';\nimport {Link} from 'react-router-dom';\nimport {formatMoney} from \"../../pipes/priceFormatter\";\nimport {cumulativeOffSet} from \"../../utilities/cumulativeOffset\";\n\nimport './Product.scss';\nimport SlideDots from \"../SlideDots/SlideDots\";\nimport {addProductToCart} from \"../../actions\";\n\n\nconst Product = (props) => {\n\n    const {\n        title,\n        price,\n        images,\n        description,\n        id,\n    } = props.product;\n\n    const imageRef = React.createRef();\n    const [img, setImg] = useState(images[0]);\n    const [aItem, setAItem] = useState(0);\n\n\n    const handleImageChange = (e) => {\n\n        let  clientX;\n\n        if(e.type === 'touchmove') {\n            clientX = e.touches[0].clientX;\n        } else {\n            clientX = e.clientX;\n        }\n\n        const currentX = clientX - cumulativeOffSet(imageRef.current).left;\n\n        // console.dir(imageRef.current);\n\n        const part = imageRef.current.clientWidth / images.length;\n       // console.log(Math.ceil(currentX / part) - 1);\n\n        let imgIndex = Math.ceil(currentX / part) - 1;\n        if (imgIndex < 0) {\n            imgIndex = 0;\n        }\n\n        if (imgIndex >= images.length) {\n            imgIndex = images.length - 1;\n        }\n        setAItem(imgIndex);\n        setImg(images[imgIndex]);\n    };\n\n    const handleMouseOut = (e) => {\n        setImg(images[0]);\n        setAItem(0);\n    };\n\n    const changeImage = (i) => {\n        setImg(images[i]);\n        setAItem(i);\n    }\n\n    return (\n        <div className=\"card h-100 product\">\n            <Link to={`/products/${id}`} className=\"product__link\"><img\n                onMouseMove={handleImageChange}\n                onMouseOut={handleMouseOut}\n                onTouchMove={handleImageChange}\n                onTouchEnd={handleMouseOut}\n                className=\"card-img-top product__img\" src={img} alt={title} ref={imageRef}/>\n                <SlideDots len={images.length} activeItem={aItem} changeItem={changeImage}/>\n            </Link>\n            <div className=\"card-body product__text\">\n                <h4 className=\"card-title product__title\">\n                    <Link to={`/products/${id}`}>{title}</Link>\n                </h4>\n                <h5 className=\"product__price\">${formatMoney(price)}</h5>\n                <p className=\"card-text product__description\">{description}</p>\n                <button\n                    onClick={() => {\n                        props.dispatch(addProductToCart({...props.product}))\n                    }}\n                    className=\"btn btn-info product__add-to-cart\">Add to cart\n                </button>\n            </div>\n        </div>\n    );\n};\n\nexport default connect()(Product);\n\n"]},"metadata":{},"sourceType":"module"}